code from Test-Driven Javascript Development by Christian Johansen